<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff</title>
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon"/>
    <link rel="icon" href="images/favicon.png" type="image/x-icon"/>
    <link rel="stylesheet" href="styles.css?v=1.1">
</head>
<body class="rosterBody">
  <header>
    <a href="#" class="logo"><img src="images/calicehockeylogo2.png" alt="California"></a>
    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="schedule.html">Schedule</a></li>
        <li><a href="roster.html">Roster</a></li>
        <li><a href="staff.html">Staff</a></li>
        <li><a href="articles.html">Articles</a></li>
        <li class="dropdown">
            <a href="login.php">Team</a>
            <ul class="dropdown-menu">
                <li><a href="login.php">Login</a></li>
                <li><a href="https://forms.gle/nP5RbMVFuc2RLnWz9" target="_blank">Recruits</a></li>
                <li><a href="https://forms.gle/iUhuvuu1Cd8nx1Cd6" target="_blank">Alumni</a></li>
            </ul>
        </li>
    </ul>
  </header>
    <section class="whole">
        <section class="gap"></section>
        <div class="rosterContainer coachContainer">
            <input type="radio" name="slider" id="coaches" checked>
            <input type="radio" name="slider" id="staff">
            <nav>
                <label for="coaches" class="coaches">Coaches</label>
                <label for="staff" class="staff">Executive Staff</label>
                <div class="slider"></div>
            </nav>
            <section>
                <!--Generate with Script-->
            </section>
            <script>
                async function loadStaff() {
                  try {
                    const res = await fetch('staff.json?v=' + Date.now()); // bust cache during updates
                    if (!res.ok) throw new Error(`HTTP ${res.status}`);
                    const data = await res.json();
                
                    const coaches = Array.isArray(data.coaches) ? data.coaches : [];
                    const execs   = Array.isArray(data.executive) ? data.executive : [];
                
                    const coachesContent = document.querySelector('.coachesContent');
                    const staffContent   = document.querySelector('.staffContent');
                
                    // Clear any placeholder HTML
                    if (coachesContent) coachesContent.innerHTML = '';
                    if (staffContent)   staffContent.innerHTML = '';
                
                    // Helpers
                    const fallbackImg = "images/blank-profile-picture-973460_960_720.jpeg";
                
                    function staffCard(person) {
                      const slot = document.createElement('div');
                      slot.className = 'rosterSlot coachSlot';
                      const imageSrc = person.image || fallbackImg;
                      const safeRole = person.role || '';
                      const safeContact = person.contact ? `<h5>Contact: ${person.contact}</h5>` : '';
                
                      slot.innerHTML = `
                        <div class="leftSide">
                          <img src="${imageSrc}" alt="${person.name || ''}" onerror="this.src='${fallbackImg}'">
                        </div>
                        <div class="rightSide">
                          <h2>${person.name || ''}</h2>
                          <div class="greyline"></div>
                          <section class="bio">
                            <h4>${safeRole}</h4>
                            ${safeContact}
                          </section>
                        </div>
                      `;
                      return slot;
                    }
                
                    // Populate
                    coaches.forEach(c => coachesContent.appendChild(staffCard(c)));
                    execs.forEach(e => staffContent.appendChild(staffCard(e)));
                
                  } catch (err) {
                    console.error('Error loading staff:', err);
                    const container = document.querySelector('.coachContainer section');
                    if (container) {
                      const p = document.createElement('p');
                      p.textContent = 'Error loading staff data.';
                      container.appendChild(p);
                    }
                  }
                }
                
                document.addEventListener('DOMContentLoaded', loadStaff);
            </script>
            <section>
                <div class="content coachesContent"></div>
                <div class="content staffContent"></div>
            </section>
        </div>
    </section>
    <section class="rosterBottom">
        <section class="socialmediacontainer">
            <div class="FollowUs">Follow Us:</div>
            <div><a href="#"><img src="images/new-instagram-logo-white-border-icon-png-large.png" alt="Intagram"></a></div>
            <div><a href="#"><img src="images/tiktok-round-white-icon.webp" alt="Intagram"></a></div>
            <div><a href="#"><img src="images/x-social-media-white-round-icon.png" alt="Intagram"></a></div>
        </section>
    </section>
    <script type="text/javascript">
        window.addEventListener("scroll", function(){
            var header = document.querySelector("header");
            header.classList.toggle("sticky", window.scrollY > 0);
        })
    </script>
</body>
</html>